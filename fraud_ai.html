<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FinShield - Financial Fraud Detection Assistant</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.3/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
      :root {
        --primary: #2a4365;
        --secondary: #30a6b7;
        --light: #f8fafc;
        --dark: #1a365d;
        --warning: #ed8936;
        --danger: #e53e3e;
        --success: #38a169;
      }
      
      body {
        background-color: #edf2f7;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: #2d3748;
      }
      
      .navbar {
        background-color: var(--primary);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      
      .navbar-brand {
        color: white;
        font-weight: 600;
        font-size: 1.5rem;
      }
      
      .container {
        max-width: 900px;
      }
      
      .chat-container {
        background-color: white;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        padding: 30px;
        margin-top: 30px;
      }
      
      .chat-title {
        color: var(--primary);
        font-weight: 600;
        margin-bottom: 25px;
        border-bottom: 2px solid #e2e8f0;
        padding-bottom: 15px;
      }
      
      .input-group {
        margin-bottom: 25px;
      }
      
      .form-control {
        border-radius: 8px 0 0 8px;
        padding: 12px 20px;
        border: 1px solid #cbd5e0;
      }
      
      .form-control:focus {
        border-color: var(--secondary);
        box-shadow: 0 0 0 0.2rem rgba(48, 166, 183, 0.25);
      }
      
      .btn-primary {
        background-color: var(--secondary);
        border-color: var(--secondary);
        border-radius: 0 8px 8px 0;
        padding: 12px 25px;
      }
      
      .btn-primary:hover, .btn-primary:focus {
        background-color: #2b95a3;
        border-color: #2b95a3;
      }
      
      #response {
        background-color: #f7fafc;
        border-radius: 8px;
        padding: 20px;
        min-height: 300px;
        max-height: 500px;
        overflow-y: auto;
        border-left: 4px solid var(--secondary);
      }
      
      #response h3 {
        color: var(--primary);
        font-size: 1.2em;
        margin-bottom: 15px;
      }
      
      #response strong {
        color: var(--danger);
      }
      
      #response .alert-danger {
        color: var(--danger);
        background-color: #fed7d7;
        border-color: #feb2b2;
        padding: 12px 20px;
        border-radius: 6px;
        margin-top: 10px;
      }
      
      #response .alert-warning {
        color: #744210;
        background-color: #fefcbf;
        border-color: #fbd38d;
        padding: 12px 20px;
        border-radius: 6px;
        margin-top: 10px;
      }
      
      #response .alert-success {
        color: #2f855a;
        background-color: #c6f6d5;
        border-color: #9ae6b4;
        padding: 12px 20px;
        border-radius: 6px;
        margin-top: 10px;
      }
      
      .feature-box {
        background-color: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        transition: transform 0.3s ease;
      }
      
      .feature-box:hover {
        transform: translateY(-5px);
      }
      
      .feature-icon {
        font-size: 2rem;
        color: var(--secondary);
        margin-bottom: 15px;
      }
      
      .footer {
        background-color: var(--primary);
        color: white;
        padding: 20px 0;
        margin-top: 50px;
      }
      
      .loading {
        display: inline-block;
        position: relative;
        width: 80px;
        height: 20px;
      }
      
      .loading div {
        position: absolute;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: var(--secondary);
        animation: loading 1.2s linear infinite;
      }
      
      .loading div:nth-child(1) {
        animation-delay: 0s;
        left: 8px;
      }
      
      .loading div:nth-child(2) {
        animation-delay: 0.4s;
        left: 32px;
      }
      
      .loading div:nth-child(3) {
        animation-delay: 0.8s;
        left: 56px;
      }
      
      @keyframes loading {
        0%, 100% {
          opacity: 0.2;
          transform: scale(0.8);
        }
        50% {
          opacity: 1;
          transform: scale(1);
        }
      }
      
      .chat-history {
        margin-bottom: 20px;
      }
      
      .message {
        margin-bottom: 15px;
      }
      
      .user-message {
        background-color: #ebf8ff;
        border-radius: 18px 18px 0 18px;
        padding: 12px 20px;
        margin-left: 40px;
        position: relative;
      }
      
      .bot-message {
        background-color: #e6fffa;
        border-radius: 18px 18px 18px 0;
        padding: 12px 20px;
        margin-right: 40px;
        position: relative;
      }
      
      .message-time {
        font-size: 0.75rem;
        color: #718096;
        margin-top: 5px;
      }
      
      .disclaimer {
        font-size: 0.8rem;
        color: #718096;
        margin-top: 20px;
        padding-top: 10px;
        border-top: 1px solid #e2e8f0;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container">
        <a class="navbar-brand" href="#">
          <i class="fas fa-shield-alt me-2"></i>FinShield
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <!-- <li class="nav-item">
              <a class="nav-link active" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Resources</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Contact</a>
            </li> -->
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="row mt-4">
        <div class="col-12">
          <h1 class="text-center mb-4">Financial Fraud Detection Assistant</h1>
          <p class="text-center lead">
            Ask questions about suspicious financial activities, fraud prevention, 
            or get help analyzing potential scams.
          </p>
        </div>
      </div>

      <div class="row mb-4">
        <div class="col-md-4">
          <div class="feature-box text-center">
            <div class="feature-icon">
              <i class="fas fa-search"></i>
            </div>
            <h3>Fraud Detection</h3>
            <p>Analyze transactions and identify potential fraudulent patterns</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="feature-box text-center">
            <div class="feature-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <h3>Security Tips</h3>
            <p>Get practical advice to protect your financial assets</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="feature-box text-center">
            <div class="feature-icon">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3>Scam Alerts</h3>
            <p>Stay informed about the latest financial scams and threats</p>
          </div>
        </div>
      </div>

      <div class="chat-container">
        <h2 class="chat-title">
          <i class="fas fa-comments me-2"></i>Financial Fraud Consultant
        </h2>
        
        <div id="chatHistory" class="chat-history"></div>
        
        <div class="input-group">
          <input
            type="text"
            class="form-control"
            id="userInput"
            placeholder="Describe a suspicious transaction or ask about fraud prevention..."
          />
          <button class="btn btn-primary" onclick="sendMessage()">
            <i class="fas fa-paper-plane me-2"></i>Ask
          </button>
        </div>
        
        <div id="response"></div>
        
        <div class="disclaimer">
          <p><strong>Disclaimer:</strong> This AI assistant provides general information about financial fraud but is not a substitute for professional financial or legal advice. If you believe you're a victim of fraud, contact your financial institution and local authorities immediately.</p>
        </div>
      </div>
    </div>

    <footer class="footer mt-5">
      <div class="container text-center">
        <p>&copy; 2025 FinShield - Financial Fraud Detection Assistant</p>
      </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/js/bootstrap.bundle.min.js"></script>
    <script>
      // Initialize chat history
      let chatHistory = [];
      
      document.getElementById("userInput").addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          sendMessage();
        }
      });

      function getCurrentTime() {
        const now = new Date();
        return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      }

      function addMessageToChatHistory(content, isUser) {
        const messageElement = document.createElement('div');
        messageElement.className = 'message ' + (isUser ? 'text-end' : '');
        
        const messageContent = document.createElement('div');
        messageContent.className = isUser ? 'user-message' : 'bot-message';
        messageContent.textContent = content;
        
        const timeElement = document.createElement('div');
        timeElement.className = 'message-time ' + (isUser ? 'text-end' : '');
        timeElement.textContent = getCurrentTime();
        
        messageElement.appendChild(messageContent);
        messageElement.appendChild(timeElement);
        
        document.getElementById('chatHistory').appendChild(messageElement);
      }

      async function sendMessage() {
        const inputField = document.getElementById("userInput");
        const input = inputField.value;
        const responseDiv = document.getElementById("response");
        
        if (!input) {
          responseDiv.innerHTML = "<div class='alert alert-warning'>Please enter a message.</div>";
          return;
        }
        
        // Add user message to chat history
        addMessageToChatHistory(input, true);
        chatHistory.push({ role: "user", content: input });
        
        responseDiv.innerHTML = `
          <div class="loading">
            <div></div>
            <div></div>
            <div></div>
          </div>
          <p class="mt-3">Analyzing your query...</p>
        `;
        inputField.value = "";

        try {
          // Create a fraud detection specific prompt
          const enhancedPrompt = `As a financial fraud detection expert, please analyze the following query and provide advice: ${input}`;
          
          const response = await fetch(
            "https://openrouter.ai/api/v1/chat/completions",
            {
              method: "POST",
              headers: {
                 Authorization: "Bearer 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", // "Add your own API key after Bearer"
                "HTTP-Referer": "https://www.finshield.com",
                "X-Title": "FinShield - Fraud Detection Assistant",
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                model: "deepseek/deepseek-r1:free",
                messages: [{ role: "user", content: enhancedPrompt }],
              }),
            }
          );
          
          const data = await response.json();
          console.log("Raw API response:", data);

          if (response.ok && data.choices?.[0]?.message?.content) {
            const markdownText = data.choices[0].message.content;
            responseDiv.innerHTML = marked.parse(markdownText);
            
            // Add bot response to chat history
            addMessageToChatHistory(data.choices[0].message.content.substring(0, 100) + "...", false);
            chatHistory.push({ role: "assistant", content: data.choices[0].message.content });
            
            // Add financial warning class to certain keywords in the response
            highlightFinancialRisks(responseDiv);
          } else {
            responseDiv.innerHTML = "<div class='alert alert-danger'>API Error: " + (data.error?.message || "Unexpected response.") + "</div>";
          }
        } catch (error) {
          responseDiv.innerHTML = "<div class='alert alert-danger'>Error: " + error.message + "</div>";
        }
      }
      
      function highlightFinancialRisks(element) {
        const riskTerms = [
          'scam', 'fraud', 'phishing', 'suspicious', 'unauthorized',
          'identity theft', 'data breach', 'malware', 'ransomware',
          'money laundering', 'high risk'
        ];
        
        // Simple highlighting for risk terms
        let html = element.innerHTML;
        riskTerms.forEach(term => {
          const regex = new RegExp('\\b' + term + '\\b', 'gi');
          html = html.replace(regex, `<span class="text-danger fw-bold">$&</span>`);
        });
        element.innerHTML = html;
      }
      
      // Sample welcome message
      window.onload = function() {
        const responseDiv = document.getElementById("response");
        responseDiv.innerHTML = marked.parse(`
## Welcome to FinShield!

I'm your financial fraud prevention assistant. You can ask me about:

* Suspicious transactions or emails
* How to protect your financial accounts
* Common fraud techniques and how to avoid them
* Warning signs of financial scams
* Steps to take if you suspect you're a victim of fraud

**Try asking a question about financial security or fraud prevention.**
        `);
      }
    </script>
  </body>
</html>
